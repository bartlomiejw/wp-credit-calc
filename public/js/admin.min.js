import{d as K,o as t,c as j,w as $,a as p,b as B,e as o,F as V,r as C,f as N,g as c,t as O,E as W,h as P,i as R,j as T,k as F,l as ee,m as z,n as te,p as se,q as oe,s as ne,u as le,v as ae,x as J,y as ce,z as L,A as ie,B as de,C as re,D as ue,G as _e,H as pe,I as me,J as ge}from"./elementPlus.min.js";import{_ as M,a as ye,c as fe,b as he,i as ve}from"./index.min.js";const ke=l=>{const s=window.location.href,g=s.indexOf("admin.html")>0,v=document.querySelector(g?".wp-menu-open":`#toplevel_page_${l}`),m=s.substr(s.indexOf(g?"#/":"admin.php"));if(v){v.addEventListener("click",function(f){const i=f.target,x=this.querySelectorAll("li");for(let b=0;b<x.length;b++){let S=x[b];S!==f.target.parentElement?S.classList.remove("current"):i.parentElement.classList.add("current")}});const e=v.querySelectorAll(".current");for(let f=0;f<e.length;f++)e[f].classList.remove("current");let y=v.querySelector(`.wp-submenu a[href="${m}"`);!g&&m.endsWith("#/")&&(y=v.querySelector(".wp-submenu a.wp-first-item")),y&&(console.log(y),y.parentElement.classList.add("current"))}};const we=["value"],be={key:1,class:"md:w-3/5"},xe={class:"block text-gray-600 font-bold md:text-left mb-3 md:mb-0 pr-4",for:"my-checkbox"},Ve={class:"text-sm text-gray-600"},$e={class:"md:w-2/5"},Se={key:0},Ue={key:1},Ce={key:2},Oe={key:3},ze={key:4},Ne=K({__name:"CalcData",props:{keyName:null,title:null,removeId:null,name:null,oldSettings:null,settings:null,structure:null},setup(l){const s=l,g=m=>{const e={...s.structure.options.credit_calc_settings.repeater},y=[];return Object.keys(e).forEach(f=>{const i=e[f];i.section===m&&(i.id=f,y.push(i))}),y},v=m=>{s.settings.credit_calc_settings=s.settings.credit_calc_settings.filter(e=>e.id!==m)};return(m,e)=>{const y=W,f=P,i=R,x=T,b=F,S=ee;return t(),j(S,{title:l.title,name:s.name},{default:$(()=>[p(y,{class:"mb-4",size:"large",type:"danger",onClick:e[0]||(e[0]=a=>v(s.removeId))},{default:$(()=>[B(" Usu\u0144 kalkulator ")]),_:1}),(t(!0),o(V,null,C(g("settings"),(a,E)=>(t(),o("div",{class:"md:flex mb-4 items-center",key:`calculator-name-${E}`},[a.type==="id"?(t(),o("input",{key:0,value:s.keyName,type:"hidden"},null,8,we)):N("",!0),a.type!=="id"?(t(),o("div",be,[c("label",xe,O(a.name),1),c("p",Ve,O(a.description),1)])):N("",!0),c("div",$e,[a.type==="toggle"?(t(),o("div",Se,[p(f,{modelValue:s.settings.credit_calc_settings[l.keyName][a.id],"onUpdate:modelValue":k=>s.settings.credit_calc_settings[l.keyName][a.id]=k,size:"large"},null,8,["modelValue","onUpdate:modelValue"])])):["textarea"].indexOf(a.type)>-1?(t(),o("div",Ue,[p(i,{modelValue:s.settings.credit_calc_settings[l.keyName][a.id],"onUpdate:modelValue":k=>s.settings.credit_calc_settings[l.keyName][a.id]=k,rows:5,size:"large",type:"textarea",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])])):a.type==="color"?(t(),o("div",Ce,[p(x,{modelValue:s.settings.credit_calc_settings[l.keyName][a.id],"onUpdate:modelValue":k=>s.settings.credit_calc_settings[l.keyName][a.id]=k},null,8,["modelValue","onUpdate:modelValue"])])):a.type==="number"?(t(),o("div",Oe,[p(b,{modelValue:s.settings.credit_calc_settings[l.keyName][a.id],"onUpdate:modelValue":k=>s.settings.credit_calc_settings[l.keyName][a.id]=k,precision:2,size:"large",placeholder:"0"},null,8,["modelValue","onUpdate:modelValue"])])):a.type==="text"?(t(),o("div",ze,[p(i,{modelValue:s.settings.credit_calc_settings[l.keyName][a.id],"onUpdate:modelValue":k=>s.settings.credit_calc_settings[l.keyName][a.id]=k,size:"large",placeholder:"Wpisz"},null,8,["modelValue","onUpdate:modelValue"])])):N("",!0)])]))),128))]),_:1},8,["title","name"])}}});const Ee=M(Ne,[["__scopeId","data-v-8fd76f50"]]);const Ie=l=>(ue("data-v-d630fda9"),l=l(),_e(),l),je={key:0,class:"app-settings w-full flex flex-wrap mx-auto"},Ae={class:"w-full md:w-1/5 pt-4"},Le={class:"w-full sticky inset-0 lg:h-auto overflow-x-hidden overflow-y-auto lg:overflow-y-hidden lg:block mt-0 my-2 lg:my-0 border border-gray-400 lg:border-transparent bg-white shadow lg:shadow-none lg:bg-transparent z-20"},Be=["href"],De={class:"font-bold"},Ke={class:"space-x-3 flex justify-end pt-2"},Me=Ie(()=>c("div",{class:"pt-2"},[c("p",null,[c("strong",null,"Widget - strona")]),c("code",{class:"m-auto block w-100"},"[creditcalc view='calculator' name='kalkulatora{numer}']")],-1)),qe={class:"w-full md:w-4/5 min-h-screen"},We={class:"ml-3"},Pe=["id"],Re={class:"p-8 mt-6 lg:mt-0 rounded shadow bg-white"},Te={class:"font-sans font-bold break-normal text-gray-700 pb-4 text-xl w-full"},Fe={class:"md:w-3/5"},Je={class:"block text-gray-600 font-bold md:text-left mb-3 md:mb-0 pr-4",for:"my-checkbox"},He={class:"text-sm text-gray-600"},Ge={class:"md:w-2/5"},Ze={key:0},Qe={key:1},Xe={key:2},Ye={key:3},et={key:4},tt=["onUpdate:modelValue"],st={key:5},ot=K({__name:"Settings",setup(l){const s=J("win"),g={},v={settings:""},m=z({actionKey:0,loaded:!1}),e=z({...g}),y=z({}),f=z({}),i=z({sections:{},options:{}}),x=te(!1);se(()=>{const d=JSON.stringify(e),r=JSON.stringify(g);return m.actionKey=m.actionKey+1,d===r});const b=d=>{const r={...i.options},h=[];return Object.keys(r).forEach(u=>{const U=r[u];U.section===d&&(U.id=u,h.push(U))}),h},S=d=>{const r={...i.options.credit_calc_settings.repeater},h={};return Object.keys(r).forEach(u=>{h[u]={key:Date.now(),value:""}}),h},a=async()=>{try{let d=ce(e);const r=await ye.post(v.settings,d);if(r.status===200){L({message:"Twoje ustawienia zosta\u0142y zapisane.",type:"success"});const h=s.vue_wp_plugin_config_admin;Object.assign(g,h.settings||{}),Object.assign(e,e||{}),Object.keys(e).forEach(u=>{g[u]=e[u],e[u]=e[u]}),m.actionKey=m.actionKey+1}else L.error("Odpowied\u017A wordpress z b\u0142\u0119dem. "+JSON.stringify(r,null,2))}catch(d){L.error("Odpowied\u017A serwera z b\u0142\u0119dem. "+d.message)}},E=async d=>{var h;await ie();const r=s.vue_wp_plugin_config_admin;s.$appConfig.nonce||(s.$appConfig.nonce=r.rest.nonce),Object.assign(i,r.settingStructure||{}),i.sections=i.sections,i.options=i.options,Object.assign(e,r.settings||{}),Object.assign(y,S()||{}),Object.assign(f,r.settings.credit_calc_settings||{}),Object.assign(v,r.rest.endpoints),Object.keys(e).forEach(u=>{g[u]=e[u],e[u]=e[u]}),x.value=!0,(h=d==null?void 0:d.proxy)==null||h.$forceUpdate()},k=d=>{e[d].push({id:"kalkulator"+e[d].length,credit_amount_default:0,credit_amount_max:0,credit_amount_min:0,credit_amount_step:0,credit_period_default:0,credit_period_max:0,credit_period_min:0,credit_period_step:0,interest_rate:0,other_costs:0,sale_number:0,provision:0,rrso:0,sale_switch:!1})};return oe(()=>{const d=pe();if(s&&s.vue_wp_plugin_config_admin){E(d);return}document.onreadystatechange=async()=>{document.readyState==="complete"&&E(d)}}),(d,r)=>{const h=ne,u=le,U=W,G=P,q=R,Z=T,Q=F,X=Ee,Y=ae;return x.value?(t(),o("div",je,[c("aside",Ae,[c("div",Le,[p(u,{"default-active":"1",class:"rounded shadow bg-white"},{default:$(()=>[(t(!0),o(V,null,C(i.sections,(I,w)=>(t(),j(h,{key:`el-menu-item-${w}`,index:w},{default:$(()=>[c("a",{href:`/#${w}`},[c("span",De,O(I),1)],8,Be)]),_:2},1032,["index"]))),128))]),_:1}),c("div",Ke,[p(U,{onClick:r[0]||(r[0]=I=>a()),style:{width:"100px"},type:"primary",size:"large","data-rerendered":m.actionKey},{default:$(()=>[B(" Zapisz ")]),_:1},8,["data-rerendered"])]),Me])]),c("section",qe,[c("div",We,[(t(!0),o(V,null,C(i.sections,(I,w)=>(t(),o("div",{id:w,class:"pt-4",key:`card-${w}`},[c("div",Re,[c("h2",Te,O(I),1),(t(!0),o(V,null,C(b(w),n=>(t(),o("div",{class:"md:flex mb-4 items-center",key:`input-item-${n.id}`},[c("div",Fe,[c("label",Je,O(n.name),1),c("p",He,O(n.description),1)]),c("div",Ge,[n.type==="toggle"?(t(),o("div",Ze,[p(G,{modelValue:e[n.id],"onUpdate:modelValue":_=>e[n.id]=_,size:"large"},null,8,["modelValue","onUpdate:modelValue"])])):["textarea"].indexOf(n.type)>-1?(t(),o("div",Qe,[p(q,{modelValue:e[n.id],"onUpdate:modelValue":_=>e[n.id]=_,rows:5,size:"large",type:"textarea",placeholder:"Please input"},null,8,["modelValue","onUpdate:modelValue"])])):n.type==="color"?(t(),o("div",Xe,[p(Z,{modelValue:e[n.id],"onUpdate:modelValue":_=>e[n.id]=_},null,8,["modelValue","onUpdate:modelValue"])])):n.type==="number"?(t(),o("div",Ye,[p(Q,{modelValue:e[n.id],"onUpdate:modelValue":_=>e[n.id]=_,size:"large",precision:2,placeholder:"Wprowad\u017A liczb\u0119"},null,8,["modelValue","onUpdate:modelValue"])])):n.type==="repeater"&&w==="settings"?(t(),o("div",et,[p(U,{size:"large",type:"primary",onClick:_=>k(n.id)},{default:$(()=>[B(" Utw\xF3rz kalkulator ")]),_:2},1032,["onClick"]),de(c("input",{"onUpdate:modelValue":_=>e[n.id]=_,type:"hidden"},null,8,tt),[[re,e[n.id]]])])):(t(),o("div",st,[p(q,{modelValue:e[n.id],"onUpdate:modelValue":_=>e[n.id]=_,size:"large",placeholder:"Wprowad\u017A tekst"},null,8,["modelValue","onUpdate:modelValue"])]))])]))),128)),w==="settings"?(t(),j(Y,{key:0},{default:$(()=>[(t(!0),o(V,null,C(b(w),n=>(t(),o(V,{key:`repeater-${n.id}`},[(t(!0),o(V,null,C(e[n.id],(_,A)=>(t(),j(X,{key:`calculator-${A}`,keyName:A,removeId:_.id,title:`Kalkulator: ${_.credit_name} | Nazwa: ${_.id}`,name:`calculator-${A}`,"old-settings":g,settings:e,structure:i},null,8,["keyName","removeId","title","name","settings","structure"]))),128))],64))),128))]),_:2},1024)):N("",!0)])],8,Pe))),128))])])])):N("",!0)}}});const H=M(ot,[["__scopeId","data-v-d630fda9"]]),nt=K({components:{Settings:H},mounted(){const l=J("pluginConfig",{});ke(l.prefix||"vue-app")}}),lt={class:"main-wrapper"};function at(l,s,g,v,m,e){const y=me("Settings");return t(),o("div",lt,[p(y)])}const ct=M(nt,[["render",at]]),it=[{path:"/",component:H}],dt=fe({history:he(),routes:it});const D=ge(ct);D.use(dt);setTimeout(()=>{ve(D,"vue_wp_plugin_config_admin"),D.mount("#wp-credit-calc-admin-app")},200);
